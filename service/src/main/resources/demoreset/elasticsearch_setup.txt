UUID: 3750e648-1246-400d-a51c-e2a3894e8ac4
Title: elasticsearch setup
Type: Tools
Date of creation: 2025-05-15T04:54:44.439411
Date of modification: 
Tags: [elastic, search, setup, docker]

Content: 

<h2><strong>21.06.2023</strong></h2><p></p><p>Tworzenie&nbsp;kontenera:</p><p>docker&nbsp;run&nbsp;--name&nbsp;my-container-name&nbsp;-p&nbsp;9200:9200&nbsp;-p&nbsp;9600:9600&nbsp;-e&nbsp;&quot;discovery.type=single-node&quot;&nbsp;amazon/opendistro-for-elasticsearch:1.2.1</p><p></p><p>W&nbsp;przypadku,&nbsp;gdy&nbsp;chcemy&nbsp;wyłączyć&nbsp;weryfikację&nbsp;SSL&nbsp;musimy&nbsp;wejść&nbsp;do&nbsp;basha&nbsp;elastica:</p><p>docker&nbsp;exec&nbsp;-it&nbsp;my-container-name&nbsp;bash</p><p></p><p>Następnie&nbsp;przejść&nbsp;do&nbsp;pliku&nbsp;elasticsearch.yml&nbsp;w&nbsp;folderze&nbsp;root/config&nbsp;i&nbsp;zmienić&nbsp;wartość&nbsp;&quot;true&quot;&nbsp;w&nbsp;linijce</p><p>opendistro_security.ssl.http.enabled:&nbsp;true</p><p>na&nbsp;&quot;false&quot;.</p><p></p><p>Można&nbsp;to&nbsp;zrobić&nbsp;komendą:</p><p>sed&nbsp;&#39;s/plugins.security.ssl.http.enabled:&nbsp;true/plugins.security.ssl.http.enabled:&nbsp;false/&#39;&nbsp;~/config/opensearch.yml</p><p>źródło:&nbsp;https://askubuntu.com/questions/837384/sed-replace-specific-line-in-file</p><p></p><p>Kontener&nbsp;można&nbsp;zrestartować,&nbsp;a&nbsp;we&nbsp;właściwym&nbsp;kodzie&nbsp;trzeba&nbsp;też&nbsp;pamiętać&nbsp;by&nbsp;przy&nbsp;łączeniu&nbsp;się&nbsp;z&nbsp;instancją&nbsp;</p><p>nie&nbsp;korzystać&nbsp;z&nbsp;połączenia&nbsp;SSL.</p><p></p><p></p><p></p><p>=UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!=</p><p>Wersja&nbsp;&nbsp;obrazu&nbsp;może&nbsp;być&nbsp;ważna&nbsp;dla&nbsp;niektórych&nbsp;OS&nbsp;(np.&nbsp;Windows7),&nbsp;bo&nbsp;przy&nbsp;inicjalizacji&nbsp;kontenera&nbsp;niekiedy&nbsp;występują&nbsp;błędy&nbsp;-&nbsp;</p><p>warto&nbsp;zatem&nbsp;zmienić&nbsp;wersję&nbsp;na&nbsp;inną,&nbsp;wcześniejszą.&nbsp;Podane&nbsp;tutaj&nbsp;wersje&nbsp;działają&nbsp;dla&nbsp;systemu&nbsp;Windows&nbsp;7.</p><p></p><p>Czasami&nbsp;może&nbsp;wystąpić&nbsp;też&nbsp;problem&nbsp;niewystarczającej&nbsp;pamięci&nbsp;RAM&nbsp;w&nbsp;maszynie&nbsp;wirtualnej&nbsp;-&nbsp;tutaj&nbsp;wystarczy&nbsp;zwiększyć&nbsp;</p><p>ten&nbsp;zasób&nbsp;poprzez&nbsp;zmianę&nbsp;ustawień&nbsp;w&nbsp;danej&nbsp;maszynie&nbsp;lub&nbsp;jej&nbsp;inicjalizacja&nbsp;z&nbsp;dodaktowym&nbsp;argumentem:</p><p>docker-machine&nbsp;create&nbsp;-d&nbsp;virtualbox&nbsp;--virtualbox-memory&nbsp;4096&nbsp;default&nbsp;</p><p>(komenda&nbsp;nie&nbsp;była&nbsp;sprawdzana&nbsp;na&nbsp;systemie&nbsp;Windows&nbsp;7)</p><p>=UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!==UWAGA!=</p><p></p><p></p><h2><strong>27.03.2024</strong></h2><p></p><p>Tworzenie&nbsp;kontenera:</p><p></p><p>docker&nbsp;run&nbsp;--name&nbsp;es&nbsp;-p&nbsp;9200:9200&nbsp;-p&nbsp;9600:9600&nbsp;-e&nbsp;&quot;discovery.type=single-node&quot;&nbsp;-e&nbsp;OPENSEARCH_INITIAL_ADMIN_PASSWORD=&#39;Yuc8$RikA34%ZoPPao98t&#39;&nbsp;opensearchproject/opensearch:2</p><p></p><p>Skąd&nbsp;zabrany&nbsp;został&nbsp;image&nbsp;kontenera?</p><p>https://opensearch.org/docs/latest/install-and-configure/install-opensearch/docker/</p><p></p><p>OPENSEARCH_INITIAL_ADMIN_PASSWORD&nbsp;-&nbsp;jest&nbsp;potrzebne,&nbsp;bez&nbsp;tego&nbsp;co&nbsp;prawda&nbsp;konktener&nbsp;się&nbsp;tworzy,&nbsp;ale&nbsp;występuje&nbsp;log&nbsp;z&nbsp;błędem,&nbsp;który&nbsp;upomina&nbsp;się&nbsp;o&nbsp;hasło.</p><p>Hasło&nbsp;nie&nbsp;może&nbsp;być&nbsp;proste&nbsp;-&nbsp;inaczej&nbsp;nie&nbsp;będzie&nbsp;ono&nbsp;zaakceptowane.&nbsp;</p><p></p><p>Obecne&nbsp;hasło:&nbsp;</p><p>Yuc8$RikA34%ZoPPao98t</p><p></p><p>WAŻNE!!!</p><p>Przy&nbsp;próbie&nbsp;połączenia&nbsp;z&nbsp;kontenerem&nbsp;trzeba&nbsp;pamiętać&nbsp;o&nbsp;SSL&nbsp;-&nbsp;połączenie&nbsp;z&nbsp;adresem:</p><p>http://localhost:9200</p><p>się&nbsp;nie&nbsp;powiedzie.&nbsp;Trzeba&nbsp;zamiast&nbsp;tego&nbsp;użyć&nbsp;https:</p><p>https://localhost:9200</p><p></p><p></p><p>Wyłączenie&nbsp;SSL&nbsp;=========================================================================================================================================</p><p></p><p>By&nbsp;wyłączyć&nbsp;przejść&nbsp;do&nbsp;pliku&nbsp;elasticsearch.yml&nbsp;w&nbsp;folderze&nbsp;root/config&nbsp;i&nbsp;zmienić&nbsp;wartość&nbsp;&quot;true&quot;&nbsp;w&nbsp;linijce</p><p>opendistro_security.ssl.http.enabled:&nbsp;true</p><p>na&nbsp;&quot;false&quot;.</p><p></p><p>Można&nbsp;to&nbsp;zrobić&nbsp;komendą:</p><p>sed&nbsp;&#39;s/plugins.security.ssl.http.enabled:&nbsp;true/plugins.security.ssl.http.enabled:&nbsp;false/&#39;&nbsp;~/config/opensearch.yml&nbsp;&gt;&nbsp;~/config/opensearch_tmp.yml&nbsp;&amp;&amp;&nbsp;mv&nbsp;~/config/opensearch_tmp.yml&nbsp;~/config/opensearch.yml</p><p>źródło:&nbsp;https://askubuntu.com/questions/837384/sed-replace-specific-line-in-file</p><p></p><p>Kontener&nbsp;można&nbsp;zrestartować,&nbsp;a&nbsp;we&nbsp;właściwym&nbsp;kodzie&nbsp;trzeba&nbsp;też&nbsp;pamiętać&nbsp;by&nbsp;przy&nbsp;łączeniu&nbsp;się&nbsp;z&nbsp;instancją&nbsp;</p><p>nie&nbsp;korzystać&nbsp;z&nbsp;połączenia&nbsp;SSL.</p><p></p><p>sed&nbsp;&#39;s/plugins.security.ssl.http.enabled:&nbsp;true/plugins.security.ssl.http.enabled:&nbsp;false/&#39;&nbsp;~/config/opensearch.yml&nbsp;&gt;&nbsp;~/config/opensearch_tmp.yml&nbsp;&amp;&amp;&nbsp;mv&nbsp;~/config/opensearch_tmp.yml&nbsp;~/config/opensearch.yml</p>

